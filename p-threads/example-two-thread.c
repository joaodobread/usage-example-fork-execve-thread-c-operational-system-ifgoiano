#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

void *routine(void *arg);

int main(int argc, char *argv[])
{
  pthread_t thread_idA;
  pthread_t thread_idB;
  void *thread_res;
  int rstatus;

  rstatus = pthread_create(&thread_idA, NULL, routine, (void *)("Thread A"));

  if (rstatus != 0)
    exit(EXIT_FAILURE);

  rstatus = pthread_create(&thread_idB, NULL, routine, (void *)("Thread B"));

  if (rstatus != 0)
    exit(EXIT_FAILURE);

  rstatus = pthread_join(thread_idA, &thread_res);

  if (rstatus != 0)
    exit(EXIT_FAILURE);

  rstatus = pthread_join(thread_idB, &thread_res);

  if (rstatus != 0)
    exit(EXIT_FAILURE);

  return 0;
}

void *routine(void *arg)
{
  int contador = 10;

  /*procedimento para decrementar um contador e exibir o seu valor*/
  while (contador--)
  {
    printf("%s: %i\n", (char *)arg, contador);
  }

  /*finaliza a função retornando o argumento que foi recebido*/
  pthread_exit(arg);
}